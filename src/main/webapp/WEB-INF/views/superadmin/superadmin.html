<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" ng-app="qwait">
<head>
  <title th:text="#{view.home.title}">QWait</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <link rel="shortcut icon" id="favicon" href="../../icons/favicon.ico" th:href="@{/icons/favicon.ico}"/>

  <link rel="apple-touch-icon" sizes="144x144" href="../../icons/apple-touch-icon-144x144.png"
        th:href="@{/icons/apple-touch-icon-144x144.png}"/>
  <link rel="apple-touch-icon" sizes="114x114" href="../../icons/apple-touch-icon-114x114.png"
        th:href="@{/icons/apple-touch-icon-114x114.png}"/>
  <link rel="apple-touch-icon" sizes="72x72" href="../../icons/apple-touch-icon-72x72.png"
        th:href="@{/icons/apple-touch-icon-72x72.png}"/>
  <link rel="apple-touch-icon" href="../../icons/apple-touch-icon.png" th:href="@{/icons/apple-touch-icon.png}"/>

  <link rel="stylesheet" href="../../../../../target/webapp/css/style.css" th:href="@{/css/style.css}"/>

  <script src="../../js-vendor/angular.js" th:srsc="@{/js-vendor/angular.js}"></script>
  <script src="../../js/qwait.js" th:src="@{/js/qwait.js}"></script>
  <script type="text/javascript" th:inline="javascript">
    /* <![CDATA[ */
    qwait.controller('SuperadminCtrl', ['$scope', function($scope) {
        /*[- */
        $scope.account = {name: "test", queues: []};
        /* -]*/
        /*[+
         $scope.account = JSON.parse([[${accountJson}]]);
         +]*/
    }]);
    /* ]]> */
  </script>
</head>

<body>
<nav class="top-bar" data-topbar="topbar">
  <ul class="title-area">
    <li class="name">
      <h1><a href="home.html" th:href="@{/}">QWait</a></h1>
    </li>
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>
  <section class="top-bar-section">
    <ul class="left">
      <li class="active"><a href="home.html" th:href="@{/}">Home</a></li>
      <li><a href="queue/list.html" th:href="@{/queue/list}">Queues</a></li>
      <li sec:authorize="hasRole('queue_owner')"><a href="superadmin/superadmin.html" th:href="@{/superadmin/superadmin}">SuperAdmin</a></li>
    </ul>
    <ul class="right">
      <li><a href="#">Logged in as <strong th:text="${#authentication.name}">someone</strong></a></li>
    </ul>
  </section>
</nav>
<div class="row">
<div class="large-12 columns" ng-controller="SuperadminCtrl">
<div sec:authorize="hasRole('queue_owner')">
  <div>
    <h1>Queue Owner Settings</h1>
    <form th:action="@{/superadmin/addqueueowner}" th:method="POST">
      <div class="row">
        <div class="small-3 columns">
          <label for="add-queue-owner" class="right inline">Add queue owner</label>
        </div>
      <select name="queueName">
        <option ng-repeat="queue in account.queues" value="{{queue.id}}">{{queue.name}}</option>
      </select>
      <br></br>
      <input id="add-queue-owner" name="name" type="text" placeholder="Userid to add as queueowner"></input>
        <button type="submit" class="button postfix">Add</button>
      </div>
    </form>

    <form th:action="@{/superadmin/removequeueowner}" th:method="POST">
      <div class="row">
        <div class="small-3 columns">
          <label for="remove-queue-owner" class="right inline">Remove queue owner</label>
        </div>
        <select name="queueName">
          <option ng-repeat="queue in account.queues" value="{{queue.id}}">{{queue.name}}</option>
        </select>
        <br></br>
        <input id="remove-queue-owner" name="name" type="text" placeholder="Userid to remove from queueowner"></input>
        <button type="submit" class="button postfix">Add</button>
      </div>
    </form>
  </div>
  <div sec:authorize="hasRole('super_admin')">
    <h1>SuperAdmin Settings</h1>
    <form  th:action="@{/superadmin/makeadmin}" th:method="POST">
      <div class="row">
        <div class="small-3 columns">
          <label for="add-admin-name" class="right inline">Add admin with username</label>
        </div>
        <div class="small-8 columns">
          <input id="add-admin-name" name="name" type="text" placeholder="username to make admin"/>
        </div>
        <div class="small-1 columns">
          <button type="submit" class="button postfix">Add</button>
        </div>
      </div>
    </form>

    <form th:action="@{/superadmin/removeadmin}" th:method="POST">
      <div class="row">
        <div class="small-3 columns">
          <label for="remove-admin-name" class="right inline">Remove admin with username</label>
        </div>
        <div class="small-8 columns">
          <input id="remove-admin-name" name="name" type="text" placeholder="Username to remove from admin"></input>
        </div>
        <div class="small-1 columns">
          <button type="submit" class="button postfix">Remove</button>
        </div>
      </div>
    </form>
  </div>

  <script src="../../js-vendor/jquery.js" th:src="@{/js-vendor/jquery.js}"></script>
  <script src="../../js-vendor/foundation.js" th:src="@{/js-vendor/foundation.js}"></script>
  <script src="../../js-vendor/foundation.topbar.js" th:src="@{/js-vendor/foundation.topbar.js}"></script>
  <script>$(document).foundation();</script>
</div>
</div>
  </div>
<div sec:authorize="!hasRole('queue_owner')">
  <nav class="top-bar" data-topbar="topbar">
    <ul class="title-area">
      <li class="name">
        <h1><a href="home.html" th:href="@{/}">QWait</a></h1>
      </li>
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>
    <section class="top-bar-section">
      <ul class="left">
        <li class="active"><a href="home.html" th:href="@{/}">Home</a></li>
        <li><a href="queue/list.html" th:href="@{/queue/list}">Queues</a></li>
        <li sec:authorize="hasRole('super_admin')"><a href="superadmin/superadmin.html" th:href="@{/superadmin/superadmin}">SuperAdmin</a></li>
      </ul>
      <ul class="right">
        <li><a href="#">Logged in as <strong th:text="${#authentication.name}">someone</strong></a></li>
      </ul>
    </section>
  </nav>
  <h1>This place wasn't really meant for you...</h1>
  <p>You should probably head back <a href="../home.html" th:href="@{/}">home</a></p>
</div>
</body>
</html>